{{ define "components/footer.html" }}
<style>
	#footer {
		position: relative;
	}

	#footer__app-info {
		column-gap: 5px;
		display: flex;
		justify-content: center;
	}

	#footer__theme-switcher {
		border: 1px solid var(--border-color);
		border-radius: 20px;
		column-gap: 5px;
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		padding: 3px 5px;
		position: absolute;
		right: 0;
		top: 50%;
		transform: translateY(-50%);
	}

	#footer__theme-switcher>button.feather-icon {
		padding: 0;
	}

	#footer__theme-switcher>button.feather-icon>svg {
		/* Remove extra space */
		display: block;
		height: 20px;
		width: 20px;
	}

	#footer__theme-switcher>button.feather-icon.chosen>svg {
		opacity: 1;
		stroke: var(--icon-color--hover);
	}
</style>

<div id="footer">
	<div id="footer__app-info">
		<div title="Commit {{ .GitHash }}">Budget Manager {{ .Version }}</div>
		<div class="noselect">|</div>
		<div>
			<a href="https://github.com/ShoshinNikita/budget-manager" class="feather-icon" target="_blank" title="GitHub repo">
				{{ template "components/icon" "github" }}
			</a>
		</div>
	</div>

	<div id="footer__theme-switcher">
		<button id="light-theme-btn" class="feather-icon" title="Light Theme" onclick="switchTheme(lightTheme)">
			{{ template "components/icon" "sun" }}
		</button>

		<button id="system-theme-btn" class="feather-icon" title="System Theme" onclick="switchTheme(systemTheme)">
			{{ template "components/icon" "disc" }}
		</button>

		<button id="dark-theme-btn" class="feather-icon" title="Dark Theme" onclick="switchTheme(darkTheme)">
			{{ template "components/icon" "moon" }}
		</button>
	</div>
</div>

<script>
	window.addEventListener("load", updateThemeButtons);
	window.addEventListener(themeChangeEventName, updateThemeButtons);

	const lightThemeBtn = document.getElementById("light-theme-btn");
	const systemThemeBtn = document.getElementById("system-theme-btn");
	const darkThemeBtn = document.getElementById("dark-theme-btn");

	function updateThemeButtons() {
		let highlight = null, reset = [];

		switch (getLocalStorageTheme()) {
			case lightTheme:
				highlight = lightThemeBtn;
				reset = [systemThemeBtn, darkThemeBtn];
				break;

			case systemTheme:
				highlight = systemThemeBtn;
				reset = [lightThemeBtn, darkThemeBtn];
				break;

			case darkTheme:
				highlight = darkThemeBtn;
				reset = [lightThemeBtn, systemThemeBtn,];
				break;
		}

		const className = "chosen";

		highlight.classList.add(className);
		for (let i = 0; i < reset.length; i++) {
			reset[i].classList.remove(className)
		}
	}
</script>
{{ end }}